ActiveAdmin.register AdminUser, as: 'Usuarios' do
  menu if: proc{ current_admin_user.super_admin }
  permit_params :email, :password, :password_confirmation, :super_admin

  # ================================================= START CONTROLLER =========================================================
  #   _____ ____  _   _ _______ _____   ____  _      _      ______ _____  
  #  / ____/ __ \| \ | |__   __|  __ \ / __ \| |    | |    |  ____|  __ \ 
  # | |   | |  | |  \| |  | |  | |__) | |  | | |    | |    | |__  | |__) |
  # | |   | |  | | . ` |  | |  |  _  /| |  | | |    | |    |  __| |  _  / 
  # | |___| |__| | |\  |  | |  | | \ \| |__| | |____| |____| |____| | \ \ 
  #  \_____\____/|_| \_|  |_|  |_|  \_\\____/|______|______|______|_|  \_\
  controller do
    def index

      respond_to do |format|
        format.html { super }
        format.csv  { super }
        format.xml  { super }
        format.json { super }

        format.pdf do
          @users = AdminUser.all
          render pdf: 'users', layout: 'pdf', template: 'admin/users/show_pdf.html.erb'
        end
      end
    end
  end # ================================================= END CONTROLLER =========================================================


  # ================================================= START INDEX =========================================================
  #  _____ _   _ _____  ________   __
  # |_   _| \ | |  __ \|  ____\ \ / /
  #   | | |  \| | |  | | |__   \ V / 
  #   | | | . ` | |  | |  __|   > <  
  #  _| |_| |\  | |__| | |____ / . \ 
  # |_____|_| \_|_____/|______/_/ \_\
  index do
    selectable_column
    column 'Correo' do |user|
      span user.email, admin_usuarios_path(user)
    end
    column 'Super Administrador', :super_admin
    actions
  end # ================================================= END INDEX =========================================================


  # ================================================= START SHOW =========================================================
  #  ____ ___ ____  _____ ____    _    ____      ___       ____  _   _  _____        __
  # / ___|_ _|  _ \| ____| __ )  / \  |  _ \    ( _ )     / ___|| | | |/ _ \ \      / /
  # \___ \| || | | |  _| |  _ \ / _ \ | |_) |   / _ \/\   \___ \| |_| | | | \ \ /\ / / 
  #  ___) | || |_| | |___| |_) / ___ \|  _ <   | (_>  <    ___) |  _  | |_| |\ V  V /  
  # |____/___|____/|_____|____/_/   \_\_| \_\   \___/\/   |____/|_| |_|\___/  \_/\_/  
  show do
    attributes_table do
      row 'Email' do |user|
        user.email
      end
      row 'Es Super Administrador?' do |user|
        user.super_admin
      end
      row 'Fecha de creacion' do |user|
        user.created_at
      end
    end
  end # ================================================= END SHOW =========================================================



  # ================================================= START FORM =========================================================
  #  ______ ____  _____  __  __ 
  # |  ____/ __ \|  __ \|  \/  |
  # | |__ | |  | | |__) | \  / |
  # |  __|| |  | |  _  /| |\/| |
  # | |   | |__| | | \ \| |  | |
  # |_|    \____/|_|  \_\_|  |_|
  form do |f|
    f.inputs do
      f.input :email
      f.input :password
      f.input :password_confirmation
      f.input :super_admin
    end
    f.actions
  end # ================================================== END FORM ==========================================================



  # ================================================= START FILTERS ======================================================
  #  ______ _____ _   _______ ______ _____   _____ 
  # |  ____|_   _| | |__   __|  ____|  __ \ / ____|
  # | |__    | | | |    | |  | |__  | |__) | (___  
  # |  __|   | | | |    | |  |  __| |  _  / \___ \ 
  # | |     _| |_| |____| |  | |____| | \ \ ____) |
  # |_|    |_____|______|_|  |______|_|  \_\_____/
  filter :email_cont, label: 'Buscar por Email'
  filter :super_admin, label: 'Super administrador'
  # ================================================== END FILTERS ========================================================
end
